{
    "name": "Agendar Google Calendar | Arte Dental",
    "flow": [
        {
            "id": 1,
            "module": "scenario-service:StartSubscenario",
            "version": 2,
            "parameters": {},
            "mapper": {},
            "metadata": {
                "designer": {
                    "x": 0,
                    "y": 750
                },
                "restore": {},
                "interface": [
                    {
                        "help": "Fecha y hora de inicio del rango, formato DD.MM.YYYY HH:mm (CST zona horaria)",
                        "name": "start_time",
                        "type": "text",
                        "label": "",
                        "default": "",
                        "required": true,
                        "multiline": false
                    },
                    {
                        "help": "Fecha y hora de fin del rango, formato DD.MM.YYYY HH:mm (CST zona horaria)",
                        "name": "end_time",
                        "type": "text",
                        "label": "",
                        "default": "",
                        "required": true,
                        "multiline": false
                    },
                    {
                        "help": "Descripción de la reunión. Formato: Nombre, motivo y contacto.",
                        "name": "description",
                        "type": "text",
                        "label": "",
                        "default": "",
                        "required": true,
                        "multiline": false
                    },
                    {
                        "help": "Numero telefónico del prospecto",
                        "name": "phone_number",
                        "type": "text",
                        "label": "",
                        "default": "",
                        "required": true,
                        "multiline": false
                    },
                    {
                        "help": "Email del prospecto (si se conoce)",
                        "name": "email",
                        "type": "text",
                        "label": "",
                        "default": "",
                        "required": false,
                        "multiline": false
                    },
                    {
                        "help": "Nombre/nombres del prospecto",
                        "name": "first_name",
                        "type": "text",
                        "label": "",
                        "default": "",
                        "required": false,
                        "multiline": false
                    },
                    {
                        "help": "Apellido/apellidos del prospecto",
                        "name": "last_name",
                        "type": "text",
                        "label": "",
                        "default": "",
                        "required": false,
                        "multiline": false
                    },
                    {
                        "help": "Lead ID de meta (en caso de venir de lead campaign)",
                        "name": "lead_id",
                        "type": "number",
                        "label": "",
                        "default": null,
                        "required": false
                    },
                    {
                        "help": "WID correspondiente al contacto de wassenger, incluir si está disponible.",
                        "name": "wassenger_contact_wid",
                        "type": "text",
                        "label": "",
                        "default": "",
                        "required": false,
                        "multiline": false
                    }
                ]
            }
        },
        {
            "id": 6,
            "module": "util:SetVariables",
            "version": 1,
            "parameters": {},
            "mapper": {
                "scope": "roundtrip",
                "variables": [
                    {
                        "name": "minTime",
                        "value": "{{formatDate(parseDate(1.start_time; \"DD.MM.YYYY HH:mm\"; \"America/Mexico_City\"); \"YYYY-MM-DDTHH:mm:ssZZ\"; \"America/Mexico_City\")}}"
                    },
                    {
                        "name": "maxTime",
                        "value": "{{formatDate(parseDate(1.end_time; \"DD.MM.YYYY HH:mm\"; \"America/Mexico_City\"); \"YYYY-MM-DDTHH:mm:ssZZ\"; \"America/Mexico_City\")}}"
                    },
                    {
                        "name": "minTimeDia",
                        "value": "{{formatDate(parseDate(formatDate(parseDate(1.start_time; \"DD.MM.YYYY HH:mm\"; \"America/Mexico_City\"); \"YYYY-MM-DD\"; \"America/Mexico_City\") + \"T10:00:00\"; \"YYYY-MM-DDTHH:mm:ss\"; \"America/Mexico_City\"); \"YYYY-MM-DDTHH:mm:ssZZ\"; \"America/Mexico_City\")}}"
                    },
                    {
                        "name": "maxTimeDia",
                        "value": "{{formatDate(parseDate(formatDate(parseDate(1.start_time; \"DD.MM.YYYY HH:mm\"; \"America/Mexico_City\"); \"YYYY-MM-DD\"; \"America/Mexico_City\") + \"T18:00:00\"; \"YYYY-MM-DDTHH:mm:ss\"; \"America/Mexico_City\"); \"YYYY-MM-DDTHH:mm:ssZZ\"; \"America/Mexico_City\")}}"
                    }
                ]
            },
            "metadata": {
                "designer": {
                    "x": 300,
                    "y": 750
                },
                "restore": {
                    "expect": {
                        "scope": {
                            "label": "One cycle"
                        },
                        "variables": {
                            "items": [
                                null,
                                null,
                                null,
                                null
                            ]
                        }
                    }
                },
                "expect": [
                    {
                        "name": "variables",
                        "spec": [
                            {
                                "name": "name",
                                "type": "text",
                                "label": "Variable name",
                                "required": true
                            },
                            {
                                "name": "value",
                                "type": "any",
                                "label": "Variable value"
                            }
                        ],
                        "type": "array",
                        "label": "Variables"
                    },
                    {
                        "name": "scope",
                        "type": "select",
                        "label": "Variable lifetime",
                        "required": true,
                        "validate": {
                            "enum": [
                                "roundtrip",
                                "execution"
                            ]
                        }
                    }
                ],
                "interface": [
                    {
                        "name": "minTime",
                        "type": "any",
                        "label": "minTime"
                    },
                    {
                        "name": "maxTime",
                        "type": "any",
                        "label": "maxTime"
                    },
                    {
                        "name": "minTimeDia",
                        "type": "any",
                        "label": "minTimeDia"
                    },
                    {
                        "name": "maxTimeDia",
                        "type": "any",
                        "label": "maxTimeDia"
                    }
                ]
            }
        },
        {
            "id": 25,
            "module": "google-calendar:searchEvents",
            "version": 5,
            "parameters": {
                "__IMTCONN__": 5638119
            },
            "mapper": {
                "limit": "10",
                "orderBy": "startTime",
                "timeMax": "{{6.maxTimeDia}}",
                "timeMin": "{{6.minTimeDia}}",
                "calendar": "2mgheh33a71guj46rie9jdi6qg@group.calendar.google.com",
                "eventTypes": [
                    "default",
                    "fromGmail",
                    "focusTime",
                    "outOfOffice",
                    "workingLocation"
                ],
                "singleEvents": true
            },
            "metadata": {
                "designer": {
                    "x": 600,
                    "y": 750
                },
                "restore": {
                    "expect": {
                        "orderBy": {
                            "mode": "chose",
                            "label": "Start Time (ascending)"
                        },
                        "calendar": {
                            "mode": "chose",
                            "label": "Citas en Facebook para Clínica Arte Dental -Pitillal"
                        },
                        "eventTypes": {
                            "mode": "chose"
                        }
                    },
                    "parameters": {
                        "__IMTCONN__": {
                            "data": {
                                "scoped": "true",
                                "connection": "google"
                            },
                            "label": "Mi conexión de google calendar (emmmyrtgame@gmail.com)"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTCONN__",
                        "type": "account:google",
                        "label": "Connection",
                        "required": true
                    }
                ],
                "expect": [
                    {
                        "name": "calendar",
                        "type": "select",
                        "label": "Calendar ID",
                        "required": true
                    },
                    {
                        "name": "timeMin",
                        "time": true,
                        "type": "date",
                        "label": "Start Date"
                    },
                    {
                        "name": "timeMax",
                        "time": true,
                        "type": "date",
                        "label": "End Date"
                    },
                    {
                        "name": "updatedMin",
                        "time": true,
                        "type": "date",
                        "label": "Updated from"
                    },
                    {
                        "name": "singleEvents",
                        "type": "boolean",
                        "label": "Single Events",
                        "required": true
                    },
                    {
                        "name": "q",
                        "type": "text",
                        "label": "Query"
                    },
                    {
                        "name": "eventTypes",
                        "type": "select",
                        "label": "Event Types",
                        "multiple": true,
                        "validate": {
                            "enum": [
                                "default",
                                "fromGmail",
                                "focusTime",
                                "outOfOffice",
                                "workingLocation"
                            ]
                        }
                    },
                    {
                        "name": "orderBy",
                        "type": "select",
                        "label": "Order By",
                        "validate": {
                            "enum": [
                                "startTime",
                                "updated"
                            ]
                        }
                    },
                    {
                        "name": "limit",
                        "type": "uinteger",
                        "label": "Limit"
                    }
                ]
            }
        },
        {
            "id": 26,
            "module": "builtin:BasicAggregator",
            "version": 1,
            "parameters": {
                "feeder": 25
            },
            "mapper": {
                "id": "{{25.id}}",
                "end": "{{25.end}}",
                "start": "{{25.start}}",
                "status": "{{25.status}}",
                "summary": "{{25.summary}}"
            },
            "metadata": {
                "designer": {
                    "x": 900,
                    "y": 750
                },
                "restore": {
                    "extra": {
                        "feeder": {
                            "label": "Google Calendar - Search Events [25]"
                        },
                        "target": {
                            "label": "Custom"
                        }
                    }
                }
            }
        },
        {
            "id": 29,
            "module": "builtin:BasicFeeder",
            "version": 1,
            "parameters": {},
            "mapper": {
                "array": "{{26.array}}"
            },
            "metadata": {
                "designer": {
                    "x": 1200,
                    "y": 750
                },
                "restore": {
                    "expect": {
                        "array": {
                            "mode": "edit"
                        }
                    }
                },
                "expect": [
                    {
                        "mode": "edit",
                        "name": "array",
                        "spec": [],
                        "type": "array",
                        "label": "Array"
                    }
                ]
            }
        },
        {
            "id": 30,
            "module": "builtin:BasicAggregator",
            "version": 1,
            "parameters": {
                "feeder": 29
            },
            "filter": {
                "name": "Detectar solapamiento real",
                "conditions": [
                    [
                        {
                            "a": "{{formatDate(parseDate(29.start; \"DD.MM.YYYY HH:mm\"; \"America/Mexico_City\"); \"YYYY-MM-DDTHH:mm:ssZZ\"; \"America/Mexico_City\")}}",
                            "b": "{{6.maxTime}}",
                            "o": "date:less"
                        },
                        {
                            "a": "{{formatDate(parseDate(29.end; \"DD.MM.YYYY HH:mm\"; \"America/Mexico_City\"); \"YYYY-MM-DDTHH:mm:ssZZ\"; \"America/Mexico_City\")}}",
                            "b": "{{6.minTime}}",
                            "o": "date:greater"
                        }
                    ]
                ]
            },
            "mapper": {
                "id": "{{29.id}}",
                "end": "{{29.end}}",
                "start": "{{29.start}}",
                "status": "{{29.status}}",
                "summary": "{{29.summary}}"
            },
            "metadata": {
                "designer": {
                    "x": 1500,
                    "y": 750
                },
                "restore": {
                    "extra": {
                        "feeder": {
                            "label": "Iterator [29]"
                        },
                        "target": {
                            "label": "Custom"
                        }
                    }
                }
            }
        },
        {
            "id": 27,
            "module": "builtin:BasicRouter",
            "version": 1,
            "parameters": {
                "else": 1
            },
            "mapper": null,
            "metadata": {
                "designer": {
                    "x": 1800,
                    "y": 750
                }
            },
            "routes": [
                {
                    "flow": [
                        {
                            "id": 5,
                            "module": "google-calendar:createAnEvent",
                            "version": 5,
                            "parameters": {
                                "__IMTCONN__": 5638119
                            },
                            "filter": {
                                "name": "Si hay espacio",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{length(30.array)}}",
                                            "b": "0",
                                            "o": "number:equal"
                                        }
                                    ]
                                ]
                            },
                            "mapper": {
                                "end": "{{6.maxTime}}",
                                "start": "{{6.minTime}}",
                                "select": "detail",
                                "summary": "Evaluación Dental",
                                "calendar": "2mgheh33a71guj46rie9jdi6qg@group.calendar.google.com",
                                "duration": "60",
                                "visibility": "default",
                                "allDayEvent": false,
                                "description": "{{1.description}}",
                                "transparency": "opaque",
                                "conferenceDate": false,
                                "guestPermissions": {
                                    "guestsCanModify": false,
                                    "guestsCanInviteOthers": true,
                                    "guestsCanSeeOtherGuests": true
                                }
                            },
                            "metadata": {
                                "designer": {
                                    "x": 2100,
                                    "y": 600
                                },
                                "restore": {
                                    "expect": {
                                        "select": {
                                            "label": "In Detail"
                                        },
                                        "colorId": {
                                            "mode": "chose"
                                        },
                                        "calendar": {
                                            "mode": "chose",
                                            "label": "Citas en Facebook para Clínica Arte Dental -Pitillal"
                                        },
                                        "attendees": {
                                            "mode": "chose"
                                        },
                                        "overrides": {
                                            "mode": "chose"
                                        },
                                        "recurrence": {
                                            "mode": "chose"
                                        },
                                        "visibility": {
                                            "mode": "chose",
                                            "label": "Default"
                                        },
                                        "allDayEvent": {
                                            "mode": "chose"
                                        },
                                        "attachments": {
                                            "mode": "chose"
                                        },
                                        "sendUpdates": {
                                            "mode": "chose",
                                            "label": "Empty"
                                        },
                                        "transparency": {
                                            "mode": "chose",
                                            "label": "Busy"
                                        },
                                        "conferenceDate": {
                                            "mode": "chose"
                                        }
                                    },
                                    "parameters": {
                                        "__IMTCONN__": {
                                            "data": {
                                                "scoped": "true",
                                                "connection": "google"
                                            },
                                            "label": "Mi conexión de google calendar (emmmyrtgame@gmail.com)"
                                        }
                                    }
                                },
                                "parameters": [
                                    {
                                        "name": "__IMTCONN__",
                                        "type": "account:google",
                                        "label": "Connection",
                                        "required": true
                                    }
                                ],
                                "expect": [
                                    {
                                        "name": "select",
                                        "type": "select",
                                        "label": "Create an Event",
                                        "required": true,
                                        "validate": {
                                            "enum": [
                                                "quick",
                                                "detail"
                                            ]
                                        }
                                    },
                                    {
                                        "name": "calendar",
                                        "type": "select",
                                        "label": "Calendar ID",
                                        "required": true
                                    },
                                    {
                                        "name": "colorId",
                                        "type": "select",
                                        "label": "Color"
                                    },
                                    {
                                        "name": "summary",
                                        "type": "text",
                                        "label": "Event Name",
                                        "required": true
                                    },
                                    {
                                        "name": "allDayEvent",
                                        "type": "boolean",
                                        "label": "All Day Event",
                                        "required": true
                                    },
                                    {
                                        "name": "start",
                                        "time": true,
                                        "type": "date",
                                        "label": "Start Date",
                                        "required": true
                                    },
                                    {
                                        "name": "end",
                                        "time": true,
                                        "type": "date",
                                        "label": "End Date"
                                    },
                                    {
                                        "name": "duration",
                                        "type": "time",
                                        "label": "Duration"
                                    },
                                    {
                                        "name": "description",
                                        "type": "text",
                                        "label": "Description"
                                    },
                                    {
                                        "name": "location",
                                        "type": "text",
                                        "label": "Location"
                                    },
                                    {
                                        "name": "useDefault",
                                        "type": "boolean",
                                        "label": "Use the default reminder settings for this event"
                                    },
                                    {
                                        "name": "overrides",
                                        "spec": [
                                            {
                                                "name": "method",
                                                "type": "select",
                                                "label": "Method",
                                                "options": [
                                                    {
                                                        "label": "Email",
                                                        "value": "email"
                                                    },
                                                    {
                                                        "label": "Pop-up",
                                                        "value": "popup"
                                                    }
                                                ],
                                                "required": true
                                            },
                                            {
                                                "name": "minutes",
                                                "type": "uinteger",
                                                "label": "Minutes",
                                                "required": true,
                                                "validate": {
                                                    "max": 40320
                                                }
                                            }
                                        ],
                                        "type": "array",
                                        "label": "Reminders",
                                        "validate": {
                                            "maxItems": 5
                                        }
                                    },
                                    {
                                        "name": "attendees",
                                        "spec": [
                                            {
                                                "name": "displayName",
                                                "type": "text",
                                                "label": "Name"
                                            },
                                            {
                                                "name": "email",
                                                "type": "email",
                                                "label": "Email",
                                                "required": true
                                            }
                                        ],
                                        "type": "array",
                                        "label": "Attendees"
                                    },
                                    {
                                        "name": "transparency",
                                        "type": "select",
                                        "label": "Show me as",
                                        "required": true,
                                        "validate": {
                                            "enum": [
                                                "opaque",
                                                "transparent"
                                            ]
                                        }
                                    },
                                    {
                                        "name": "visibility",
                                        "type": "select",
                                        "label": "Visibility",
                                        "required": true,
                                        "validate": {
                                            "enum": [
                                                "default",
                                                "public",
                                                "private"
                                            ]
                                        }
                                    },
                                    {
                                        "name": "sendUpdates",
                                        "type": "select",
                                        "label": "Send notifications about the event creation",
                                        "validate": {
                                            "enum": [
                                                "all",
                                                "externalOnly",
                                                "none"
                                            ]
                                        }
                                    },
                                    {
                                        "name": "guestPermissions",
                                        "spec": [
                                            {
                                                "name": "guestsCanModify",
                                                "type": "boolean",
                                                "label": "Modify event",
                                                "required": true
                                            },
                                            {
                                                "name": "guestsCanInviteOthers",
                                                "type": "boolean",
                                                "label": "Invite others",
                                                "required": true
                                            },
                                            {
                                                "name": "guestsCanSeeOtherGuests",
                                                "type": "boolean",
                                                "label": "See guest list",
                                                "required": true
                                            }
                                        ],
                                        "type": "collection",
                                        "label": "Guest Permissions"
                                    },
                                    {
                                        "name": "recurrence",
                                        "spec": {
                                            "name": "value",
                                            "type": "text",
                                            "label": "Value"
                                        },
                                        "type": "array",
                                        "label": "Recurrence"
                                    },
                                    {
                                        "name": "conferenceDate",
                                        "type": "boolean",
                                        "label": "Add Google Meet Video Conferencing",
                                        "required": true
                                    },
                                    {
                                        "name": "attachments",
                                        "spec": [
                                            {
                                                "name": "fileUrl",
                                                "type": "url",
                                                "label": "File URL",
                                                "required": true
                                            }
                                        ],
                                        "type": "array",
                                        "label": "Attachments"
                                    }
                                ],
                                "advanced": true
                            }
                        },
                        {
                            "id": 7,
                            "module": "builtin:BasicRouter",
                            "version": 1,
                            "mapper": null,
                            "metadata": {
                                "designer": {
                                    "x": 2400,
                                    "y": 600
                                }
                            },
                            "routes": [
                                {
                                    "flow": [
                                        {
                                            "id": 13,
                                            "module": "facebook-conversions-api:SendEvent",
                                            "version": 2,
                                            "parameters": {
                                                "__IMTCONN__": 5668619
                                            },
                                            "mapper": {
                                                "data": [
                                                    {
                                                        "opt_out": false,
                                                        "event_id": "{{5.id}}",
                                                        "user_data": {
                                                            "ct": "puerto vallarta",
                                                            "em": "{{1.email}}",
                                                            "fn": "{{1.first_name}}",
                                                            "ln": "{{1.last_name}}",
                                                            "ph": "{{1.phone_number}}",
                                                            "st": "ja",
                                                            "country": "mx",
                                                            "lead_id": "{{1.lead_id}}",
                                                            "external_id": "{{1.wassenger_contact_wid}}"
                                                        },
                                                        "event_name": "Schedule",
                                                        "event_time": "{{timestamp}}",
                                                        "custom_data": [
                                                            {
                                                                "name": "content_name",
                                                                "value": "Evaluación Dental"
                                                            },
                                                            {
                                                                "name": "appointment_date",
                                                                "value": "{{1.start_time}}"
                                                            }
                                                        ],
                                                        "action_source": "chat"
                                                    }
                                                ]
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2700,
                                                    "y": 0
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "ldu": {
                                                            "mode": "chose"
                                                        },
                                                        "data": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "opt_out": {
                                                                        "mode": "chose"
                                                                    },
                                                                    "event_name": {
                                                                        "mode": "chose",
                                                                        "label": "Schedule"
                                                                    },
                                                                    "custom_data": {
                                                                        "mode": "chose",
                                                                        "items": [
                                                                            null,
                                                                            null
                                                                        ]
                                                                    },
                                                                    "action_source": {
                                                                        "mode": "chose",
                                                                        "label": "Chat"
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "facebook-business-extension"
                                                            },
                                                            "label": "Arte Dental CAPI (Make System User (:arte-dental-123))"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:facebook-business-extension",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "data",
                                                        "spec": [
                                                            {
                                                                "name": "event_id",
                                                                "type": "text",
                                                                "label": "Event ID"
                                                            },
                                                            {
                                                                "name": "event_name",
                                                                "type": "select",
                                                                "label": "Event Name",
                                                                "options": [
                                                                    {
                                                                        "label": "Add Payment Info",
                                                                        "value": "AddPaymentInfo"
                                                                    },
                                                                    {
                                                                        "label": "Add To Cart",
                                                                        "value": "AddToCart"
                                                                    },
                                                                    {
                                                                        "label": "Add To Wishlist",
                                                                        "value": "AddToWishlist"
                                                                    },
                                                                    {
                                                                        "label": "Complete Registration",
                                                                        "value": "CompleteRegistration"
                                                                    },
                                                                    {
                                                                        "label": "Contact",
                                                                        "value": "Contact"
                                                                    },
                                                                    {
                                                                        "label": "Customize Product",
                                                                        "value": "CustomizeProduct"
                                                                    },
                                                                    {
                                                                        "label": "Donate",
                                                                        "value": "Donate"
                                                                    },
                                                                    {
                                                                        "label": "FindLocation",
                                                                        "value": "FindLocation"
                                                                    },
                                                                    {
                                                                        "label": "Initiate Checkout",
                                                                        "value": "InitiateCheckout"
                                                                    },
                                                                    {
                                                                        "label": "Lead",
                                                                        "value": "Lead"
                                                                    },
                                                                    {
                                                                        "label": "Page View",
                                                                        "value": "PageView"
                                                                    },
                                                                    {
                                                                        "label": "Purchase",
                                                                        "value": "Purchase",
                                                                        "nested": [
                                                                            {
                                                                                "help": "Currency must be a valid [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217) three digit currency code. Example: `USD`.",
                                                                                "name": "custom_data_currency",
                                                                                "type": "text",
                                                                                "label": "Currency",
                                                                                "required": true
                                                                            },
                                                                            {
                                                                                "help": "This could be a monetary value or a value in some other metric. Example: `142.54`.",
                                                                                "name": "custom_data_value",
                                                                                "type": "number",
                                                                                "label": "Value",
                                                                                "required": true
                                                                            },
                                                                            {
                                                                                "name": "custom_data_order_id",
                                                                                "type": "text",
                                                                                "label": "Order ID",
                                                                                "required": true
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "label": "Other",
                                                                        "value": "Other"
                                                                    },
                                                                    {
                                                                        "label": "Schedule",
                                                                        "value": "Schedule"
                                                                    },
                                                                    {
                                                                        "label": "Search",
                                                                        "value": "Search"
                                                                    },
                                                                    {
                                                                        "label": "Start Trial",
                                                                        "value": "StartTrial"
                                                                    },
                                                                    {
                                                                        "label": "Submit Application",
                                                                        "value": "SubmitApplication"
                                                                    },
                                                                    {
                                                                        "label": "Subscribe",
                                                                        "value": "Subscribe"
                                                                    },
                                                                    {
                                                                        "label": "View Content",
                                                                        "value": "ViewContent"
                                                                    }
                                                                ],
                                                                "required": true,
                                                                "validate": false
                                                            },
                                                            {
                                                                "name": "event_time",
                                                                "type": "date",
                                                                "label": "Event Time",
                                                                "required": true
                                                            },
                                                            {
                                                                "name": "action_source",
                                                                "type": "select",
                                                                "label": "Action Source",
                                                                "options": [
                                                                    {
                                                                        "label": "Email",
                                                                        "value": "email"
                                                                    },
                                                                    {
                                                                        "label": "Website",
                                                                        "value": "website"
                                                                    },
                                                                    {
                                                                        "label": "App",
                                                                        "value": "app"
                                                                    },
                                                                    {
                                                                        "label": "Phone call",
                                                                        "value": "phone_call"
                                                                    },
                                                                    {
                                                                        "label": "Chat",
                                                                        "value": "chat"
                                                                    },
                                                                    {
                                                                        "label": "Physical store",
                                                                        "value": "physical_store"
                                                                    },
                                                                    {
                                                                        "label": "System generated",
                                                                        "value": "system_generated"
                                                                    },
                                                                    {
                                                                        "label": "Other",
                                                                        "value": "other"
                                                                    }
                                                                ],
                                                                "required": true
                                                            },
                                                            {
                                                                "type": "html",
                                                                "label": "<div class=\"i-exception\"><div class=\"i-exception-description\"><h5>Reminder:</h5><p class=\"text-muted\">You do not have to hash the following inputs with `sha256()`. We will do that for you.</p></div></div>"
                                                            },
                                                            {
                                                                "name": "user_data",
                                                                "spec": [
                                                                    {
                                                                        "name": "em",
                                                                        "type": "text",
                                                                        "label": "Email"
                                                                    },
                                                                    {
                                                                        "name": "ph",
                                                                        "type": "text",
                                                                        "label": "Phone"
                                                                    },
                                                                    {
                                                                        "name": "ge",
                                                                        "type": "text",
                                                                        "label": "Gender"
                                                                    },
                                                                    {
                                                                        "name": "db",
                                                                        "type": "date",
                                                                        "label": "Day of Birth"
                                                                    },
                                                                    {
                                                                        "name": "ln",
                                                                        "type": "text",
                                                                        "label": "Last name"
                                                                    },
                                                                    {
                                                                        "name": "fn",
                                                                        "type": "text",
                                                                        "label": "First name"
                                                                    },
                                                                    {
                                                                        "name": "ct",
                                                                        "type": "text",
                                                                        "label": "City"
                                                                    },
                                                                    {
                                                                        "name": "st",
                                                                        "type": "text",
                                                                        "label": "State"
                                                                    },
                                                                    {
                                                                        "name": "zp",
                                                                        "type": "text",
                                                                        "label": "Zip"
                                                                    },
                                                                    {
                                                                        "name": "country",
                                                                        "type": "text",
                                                                        "label": "Country"
                                                                    },
                                                                    {
                                                                        "name": "external_id",
                                                                        "type": "text",
                                                                        "label": "External ID"
                                                                    },
                                                                    {
                                                                        "name": "client_ip_address",
                                                                        "type": "text",
                                                                        "label": "Client IP Address"
                                                                    },
                                                                    {
                                                                        "name": "client_user_agent",
                                                                        "type": "text",
                                                                        "label": "Client User Agent"
                                                                    },
                                                                    {
                                                                        "name": "fbc",
                                                                        "type": "text",
                                                                        "label": "Click ID"
                                                                    },
                                                                    {
                                                                        "name": "fbp",
                                                                        "type": "text",
                                                                        "label": "Browser ID"
                                                                    },
                                                                    {
                                                                        "name": "subscription_id",
                                                                        "type": "text",
                                                                        "label": "Subscription ID"
                                                                    },
                                                                    {
                                                                        "name": "lead_id",
                                                                        "type": "text",
                                                                        "label": "Lead ID"
                                                                    },
                                                                    {
                                                                        "name": "fb_login_id",
                                                                        "type": "text",
                                                                        "label": "Facebook Login ID"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "User Data",
                                                                "required": true
                                                            },
                                                            {
                                                                "name": "custom_data",
                                                                "spec": [
                                                                    {
                                                                        "name": "name",
                                                                        "type": "text",
                                                                        "label": "Name",
                                                                        "required": true
                                                                    },
                                                                    {
                                                                        "name": "value",
                                                                        "type": "any",
                                                                        "label": "Value",
                                                                        "required": true
                                                                    }
                                                                ],
                                                                "type": "array",
                                                                "label": "Custom Data"
                                                            },
                                                            {
                                                                "name": "opt_out",
                                                                "type": "boolean",
                                                                "label": "Opt Out"
                                                            },
                                                            {
                                                                "name": "event_source_url",
                                                                "type": "text",
                                                                "label": "Event Source URL"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Data",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "pixelId",
                                                        "type": "text",
                                                        "label": "Pixel ID"
                                                    },
                                                    {
                                                        "name": "test_event_code",
                                                        "type": "text",
                                                        "label": "Test Event Code"
                                                    },
                                                    {
                                                        "name": "ldu",
                                                        "type": "boolean",
                                                        "label": "Enable Limited Data Use"
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        }
                                    ]
                                },
                                {
                                    "flow": [
                                        {
                                            "id": 15,
                                            "module": "app#wassenger-0waevn:makeAnAPICall",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 5704964
                                            },
                                            "mapper": {
                                                "qs": [
                                                    {
                                                        "key": "upsert",
                                                        "value": "true"
                                                    }
                                                ],
                                                "url": "/chat/68e5a8c2819b044d9c653032/chats/{{1.phone_number}}@c.us/labels",
                                                "body": "[\"cita agendada\"]",
                                                "method": "PATCH",
                                                "headers": [
                                                    {
                                                        "key": "Content-Type",
                                                        "value": "application/json"
                                                    },
                                                    {
                                                        "key": "token",
                                                        "value": "647ac78c00b432f9078ea51b155a11da9f1738ec7472833371a35e7e304eb00d70fbb5036c385fca"
                                                    }
                                                ]
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2700,
                                                    "y": 600
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "qs": {
                                                            "mode": "chose",
                                                            "items": [
                                                                null
                                                            ]
                                                        },
                                                        "method": {
                                                            "mode": "chose",
                                                            "label": "PATCH"
                                                        },
                                                        "headers": {
                                                            "mode": "chose",
                                                            "items": [
                                                                null,
                                                                null
                                                            ]
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "app#wassenger-0waevn"
                                                            },
                                                            "label": "Wassenger Arte Dental API"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:app#wassenger-0waevn",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "url",
                                                        "type": "text",
                                                        "label": "Endpoint",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "method",
                                                        "type": "select",
                                                        "label": "Method",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "GET",
                                                                "POST",
                                                                "PUT",
                                                                "PATCH",
                                                                "DELETE"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "headers",
                                                        "spec": [
                                                            {
                                                                "name": "key",
                                                                "type": "text",
                                                                "label": "Key"
                                                            },
                                                            {
                                                                "name": "value",
                                                                "type": "text",
                                                                "label": "Value"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Headers"
                                                    },
                                                    {
                                                        "name": "qs",
                                                        "spec": [
                                                            {
                                                                "name": "key",
                                                                "type": "text",
                                                                "label": "Key"
                                                            },
                                                            {
                                                                "name": "value",
                                                                "type": "text",
                                                                "label": "Value"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Query String"
                                                    },
                                                    {
                                                        "name": "body",
                                                        "type": "any",
                                                        "label": "Body"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 17,
                                            "module": "util:SetVariables",
                                            "version": 1,
                                            "parameters": {},
                                            "mapper": {
                                                "scope": "roundtrip",
                                                "variables": [
                                                    {
                                                        "name": "delay24",
                                                        "value": "{{ceil((addHours(parseDate(1.start_time; \"DD.MM.YYYY HH:mm\"; \"America/Mexico_City\"); -24) - now) / 1000 / 60 / 60)}}h"
                                                    },
                                                    {
                                                        "name": "delay3",
                                                        "value": "{{ceil((addHours(parseDate(1.start_time; \"DD.MM.YYYY HH:mm\"; \"America/Mexico_City\"); -3) - now) / 1000 / 60 / 60)}}h"
                                                    },
                                                    {
                                                        "name": "delay1",
                                                        "value": "{{ceil((addHours(parseDate(1.start_time; \"DD.MM.YYYY HH:mm\"; \"America/Mexico_City\"); -1) - now) / 1000 / 60)}}m"
                                                    }
                                                ]
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3000,
                                                    "y": 600
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "scope": {
                                                            "label": "One cycle"
                                                        },
                                                        "variables": {
                                                            "items": [
                                                                null,
                                                                null,
                                                                null
                                                            ]
                                                        }
                                                    }
                                                },
                                                "expect": [
                                                    {
                                                        "name": "variables",
                                                        "spec": [
                                                            {
                                                                "name": "name",
                                                                "type": "text",
                                                                "label": "Variable name",
                                                                "required": true
                                                            },
                                                            {
                                                                "name": "value",
                                                                "type": "any",
                                                                "label": "Variable value"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Variables"
                                                    },
                                                    {
                                                        "name": "scope",
                                                        "type": "select",
                                                        "label": "Variable lifetime",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "roundtrip",
                                                                "execution"
                                                            ]
                                                        }
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "delay24",
                                                        "type": "any",
                                                        "label": "delay24"
                                                    },
                                                    {
                                                        "name": "delay3",
                                                        "type": "any",
                                                        "label": "delay3"
                                                    },
                                                    {
                                                        "name": "delay1",
                                                        "type": "any",
                                                        "label": "delay1"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 24,
                                            "module": "util:SetVariables",
                                            "version": 1,
                                            "parameters": {},
                                            "mapper": {
                                                "scope": "roundtrip",
                                                "variables": [
                                                    {
                                                        "name": "dia_semana_es",
                                                        "value": "{{switch(formatDate(5.start; \"d\"); 0; \"domingo\"; 1; \"lunes\"; 2; \"martes\"; 3; \"miércoles\"; 4; \"jueves\"; 5; \"viernes\"; 6; \"sábado\")}}"
                                                    },
                                                    {
                                                        "name": "dia_num",
                                                        "value": "{{formatDate(5.start; \"D\")}}"
                                                    },
                                                    {
                                                        "name": "mes_es",
                                                        "value": "{{switch(formatDate(5.start; \"M\"); 1; \"enero\"; 2; \"febrero\"; 3; \"marzo\"; 4; \"abril\"; 5; \"mayo\"; 6; \"junio\"; 7; \"julio\"; 8; \"agosto\"; 9; \"septiembre\"; 10; \"octubre\"; 11; \"noviembre\"; \"diciembre\")}}"
                                                    }
                                                ]
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3300,
                                                    "y": 600
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "scope": {
                                                            "label": "One cycle"
                                                        },
                                                        "variables": {
                                                            "items": [
                                                                null,
                                                                null,
                                                                null
                                                            ]
                                                        }
                                                    }
                                                },
                                                "expect": [
                                                    {
                                                        "name": "variables",
                                                        "spec": [
                                                            {
                                                                "name": "name",
                                                                "type": "text",
                                                                "label": "Variable name",
                                                                "required": true
                                                            },
                                                            {
                                                                "name": "value",
                                                                "type": "any",
                                                                "label": "Variable value"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Variables"
                                                    },
                                                    {
                                                        "name": "scope",
                                                        "type": "select",
                                                        "label": "Variable lifetime",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "roundtrip",
                                                                "execution"
                                                            ]
                                                        }
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "dia_semana_es",
                                                        "type": "any",
                                                        "label": "dia_semana_es"
                                                    },
                                                    {
                                                        "name": "dia_num",
                                                        "type": "any",
                                                        "label": "dia_num"
                                                    },
                                                    {
                                                        "name": "mes_es",
                                                        "type": "any",
                                                        "label": "mes_es"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 21,
                                            "module": "builtin:BasicRouter",
                                            "version": 1,
                                            "mapper": null,
                                            "metadata": {
                                                "designer": {
                                                    "x": 3600,
                                                    "y": 600
                                                }
                                            },
                                            "routes": [
                                                {
                                                    "flow": [
                                                        {
                                                            "id": 32,
                                                            "module": "app#wassenger-0waevn:sendMediaFile",
                                                            "version": 1,
                                                            "parameters": {
                                                                "__IMTCONN__": 5704964
                                                            },
                                                            "filter": {
                                                                "name": "Tiempo para 24 horas",
                                                                "conditions": [
                                                                    [
                                                                        {
                                                                            "a": "{{replace(17.delay24; \"h\"; emptystring)}}",
                                                                            "b": "1",
                                                                            "o": "number:greater"
                                                                        }
                                                                    ]
                                                                ]
                                                            },
                                                            "mapper": {
                                                                "type": "phone",
                                                                "media": {
                                                                    "file": "6911131ae52671478828d0a9",
                                                                    "viewOnce": false
                                                                },
                                                                "phone": "{{1.phone_number}}",
                                                                "message": "¡Hola {{1.first_name}}! 😊\n\nTe recordamos que tienes tu cita dental programada para mañana {{24.dia_semana_es}} {{24.dia_num}} de {{24.mes_es}} a las {{formatDate(1.start_time; \"HH:mm\")}}.\n\n📍 Arte Dental\nBenito Juárez 240, Centro Pitillal, 48290 Puerto Vallarta, Jal.\n\nSi necesitas reprogramar tu cita, por favor avísanos con tiempo llamando al 322 166 9368 o respondiendo este mensaje.\n\n¡Te esperamos!",
                                                                "retries": "100",
                                                                "schedule": {
                                                                    "delayTo": "{{17.delay24}}"
                                                                },
                                                                "expiration": {},
                                                                "previewUrl": true,
                                                                "sendReadAck": false,
                                                                "retentionPolicy": "plan_defaults"
                                                            },
                                                            "metadata": {
                                                                "designer": {
                                                                    "x": 3900,
                                                                    "y": 300
                                                                },
                                                                "restore": {
                                                                    "expect": {
                                                                        "live": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "type": {
                                                                            "mode": "chose",
                                                                            "label": "Phone"
                                                                        },
                                                                        "agent": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "media": {
                                                                            "nested": {
                                                                                "tags": {
                                                                                    "mode": "chose"
                                                                                },
                                                                                "format": {
                                                                                    "mode": "chose",
                                                                                    "label": "Empty"
                                                                                },
                                                                                "viewOnce": {
                                                                                    "mode": "chose"
                                                                                },
                                                                                "expiration": {
                                                                                    "mode": "chose",
                                                                                    "label": "Empty"
                                                                                },
                                                                                "permission": {
                                                                                    "mode": "chose",
                                                                                    "label": "Empty"
                                                                                }
                                                                            }
                                                                        },
                                                                        "order": {
                                                                            "mode": "chose",
                                                                            "empty": true
                                                                        },
                                                                        "device": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "actions": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "enqueue": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "previewUrl": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "sendReadAck": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "retentionPolicy": {
                                                                            "mode": "chose",
                                                                            "label": "plan_defaults"
                                                                        }
                                                                    },
                                                                    "parameters": {
                                                                        "__IMTCONN__": {
                                                                            "data": {
                                                                                "scoped": "true",
                                                                                "connection": "app#wassenger-0waevn"
                                                                            },
                                                                            "label": "Wassenger Arte Dental API"
                                                                        }
                                                                    }
                                                                },
                                                                "parameters": [
                                                                    {
                                                                        "name": "__IMTCONN__",
                                                                        "type": "account:app#wassenger-0waevn",
                                                                        "label": "Connection",
                                                                        "required": true
                                                                    }
                                                                ],
                                                                "expect": [
                                                                    {
                                                                        "name": "type",
                                                                        "type": "select",
                                                                        "label": "Destination Type",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "groups",
                                                                                "phone",
                                                                                "channel"
                                                                            ]
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "message",
                                                                        "type": "text",
                                                                        "label": "Message"
                                                                    },
                                                                    {
                                                                        "name": "media",
                                                                        "spec": [
                                                                            {
                                                                                "name": "file",
                                                                                "type": "text",
                                                                                "label": "File"
                                                                            },
                                                                            {
                                                                                "name": "format",
                                                                                "type": "select",
                                                                                "label": "Format",
                                                                                "validate": {
                                                                                    "enum": [
                                                                                        "gif",
                                                                                        "native",
                                                                                        "ptt"
                                                                                    ]
                                                                                }
                                                                            },
                                                                            {
                                                                                "name": "message",
                                                                                "type": "text",
                                                                                "label": "Message"
                                                                            },
                                                                            {
                                                                                "name": "viewOnce",
                                                                                "type": "boolean",
                                                                                "label": "View Once"
                                                                            },
                                                                            {
                                                                                "name": "url",
                                                                                "type": "url",
                                                                                "label": "File URL"
                                                                            },
                                                                            {
                                                                                "name": "filename",
                                                                                "type": "text",
                                                                                "label": "Filename"
                                                                            },
                                                                            {
                                                                                "name": "reference",
                                                                                "type": "text",
                                                                                "label": "Reference"
                                                                            },
                                                                            {
                                                                                "name": "permission",
                                                                                "type": "select",
                                                                                "label": "Permission",
                                                                                "validate": {
                                                                                    "enum": [
                                                                                        "public",
                                                                                        "readonly",
                                                                                        "private"
                                                                                    ]
                                                                                }
                                                                            },
                                                                            {
                                                                                "name": "tags",
                                                                                "spec": {
                                                                                    "name": "value",
                                                                                    "type": "text"
                                                                                },
                                                                                "type": "array",
                                                                                "label": "Tags"
                                                                            },
                                                                            {
                                                                                "name": "expiration",
                                                                                "type": "select",
                                                                                "label": "Expiration",
                                                                                "validate": {
                                                                                    "enum": [
                                                                                        "10m",
                                                                                        "30m",
                                                                                        "1h",
                                                                                        "6h",
                                                                                        "12h",
                                                                                        "1d",
                                                                                        "2d",
                                                                                        "3d",
                                                                                        "5d",
                                                                                        "6d",
                                                                                        "7d",
                                                                                        "15d",
                                                                                        "30d",
                                                                                        "60d",
                                                                                        "90d",
                                                                                        "120d",
                                                                                        "180d",
                                                                                        "360d",
                                                                                        "1y",
                                                                                        "2y"
                                                                                    ]
                                                                                }
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "Media"
                                                                    },
                                                                    {
                                                                        "name": "reference",
                                                                        "type": "text",
                                                                        "label": "Reference"
                                                                    },
                                                                    {
                                                                        "name": "quote",
                                                                        "type": "text",
                                                                        "label": "Reply to Message ID"
                                                                    },
                                                                    {
                                                                        "name": "deliverAt",
                                                                        "type": "date",
                                                                        "label": "Deliver At"
                                                                    },
                                                                    {
                                                                        "name": "schedule",
                                                                        "spec": [
                                                                            {
                                                                                "name": "delay",
                                                                                "type": "number",
                                                                                "label": "Delay"
                                                                            },
                                                                            {
                                                                                "name": "delayTo",
                                                                                "type": "text",
                                                                                "label": "Delay To"
                                                                            },
                                                                            {
                                                                                "name": "date",
                                                                                "type": "date",
                                                                                "label": "Date"
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "Schedule"
                                                                    },
                                                                    {
                                                                        "name": "expiration",
                                                                        "spec": [
                                                                            {
                                                                                "name": "seconds",
                                                                                "type": "number",
                                                                                "label": "Seconds"
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "Expiration"
                                                                    },
                                                                    {
                                                                        "name": "device",
                                                                        "type": "select",
                                                                        "label": "From Device"
                                                                    },
                                                                    {
                                                                        "name": "agent",
                                                                        "type": "select",
                                                                        "label": "From Agent"
                                                                    },
                                                                    {
                                                                        "name": "live",
                                                                        "type": "boolean"
                                                                    },
                                                                    {
                                                                        "name": "enqueue",
                                                                        "type": "select",
                                                                        "label": "Enqueue",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "never",
                                                                                "always",
                                                                                "opportunistic"
                                                                            ]
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "actions",
                                                                        "spec": {
                                                                            "name": "value",
                                                                            "spec": [
                                                                                {
                                                                                    "name": "action",
                                                                                    "type": "select",
                                                                                    "label": "Action",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "chat:assign",
                                                                                            "value": "chat:assign",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "agent",
                                                                                                            "type": "select",
                                                                                                            "label": "Agent",
                                                                                                            "options": "rpc://app%23wassenger-0waevn/1/searchTeamRPC",
                                                                                                            "required": true
                                                                                                        },
                                                                                                        {
                                                                                                            "name": "assigner",
                                                                                                            "type": "select",
                                                                                                            "label": "Assigner",
                                                                                                            "options": "rpc://app%23wassenger-0waevn/1/searchTeamRPC"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:unassign",
                                                                                            "value": "chat:unassign",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "assigner",
                                                                                                            "type": "select",
                                                                                                            "label": "Assigner",
                                                                                                            "options": "rpc://app%23wassenger-0waevn/1/searchTeamRPC"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:resolve",
                                                                                            "value": "chat:resolve"
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:unresolve",
                                                                                            "value": "chat:unresolve"
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:read",
                                                                                            "value": "chat:read"
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:unread",
                                                                                            "value": "chat:unread"
                                                                                        },
                                                                                        {
                                                                                            "label": "labels:add",
                                                                                            "value": "labels:add",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "labels",
                                                                                                            "type": "array",
                                                                                                            "label": "Labels"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "labels:remove",
                                                                                            "value": "labels:remove",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "labels",
                                                                                                            "type": "array",
                                                                                                            "label": "Labels"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "labels:set",
                                                                                            "value": "labels:set",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "labels",
                                                                                                    "type": "array",
                                                                                                    "label": "Labels"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "metadata:set",
                                                                                            "value": "metadata:set",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "metadata",
                                                                                                            "type": "array",
                                                                                                            "label": "Metadatas"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "metadata:add",
                                                                                            "value": "metadata:add",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "metadata",
                                                                                                            "type": "array",
                                                                                                            "label": "Metadatas"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "metadata:remove",
                                                                                            "value": "metadata:remove",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "metadata",
                                                                                                            "type": "array",
                                                                                                            "label": "Metadatas"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "type": "collection"
                                                                        },
                                                                        "type": "array",
                                                                        "label": "Actions"
                                                                    },
                                                                    {
                                                                        "name": "previewUrl",
                                                                        "type": "boolean",
                                                                        "label": "Preview URL"
                                                                    },
                                                                    {
                                                                        "name": "order",
                                                                        "type": "boolean",
                                                                        "label": "Order"
                                                                    },
                                                                    {
                                                                        "name": "sendReadAck",
                                                                        "type": "boolean",
                                                                        "label": "Send Read Acknowledgement"
                                                                    },
                                                                    {
                                                                        "name": "retries",
                                                                        "type": "integer",
                                                                        "label": "Retries"
                                                                    },
                                                                    {
                                                                        "name": "retryWait",
                                                                        "type": "number",
                                                                        "label": "Retry Wait"
                                                                    },
                                                                    {
                                                                        "name": "retentionPolicy",
                                                                        "type": "select",
                                                                        "label": "Retention Policy",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "plan_defaults",
                                                                                "never",
                                                                                "5m",
                                                                                "15m",
                                                                                "30m",
                                                                                "1h",
                                                                                "12h",
                                                                                "24h",
                                                                                "2d",
                                                                                "3d",
                                                                                "4d",
                                                                                "5d",
                                                                                "6d",
                                                                                "7d",
                                                                                "10d"
                                                                            ]
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "phone",
                                                                        "type": "text",
                                                                        "label": "Phone number",
                                                                        "required": true
                                                                    }
                                                                ],
                                                                "advanced": true
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "flow": [
                                                        {
                                                            "id": 22,
                                                            "module": "app#wassenger-0waevn:sendGroupMessage",
                                                            "version": 1,
                                                            "parameters": {
                                                                "__IMTCONN__": 5704964
                                                            },
                                                            "filter": {
                                                                "name": "Tiempo para 3 horas",
                                                                "conditions": [
                                                                    [
                                                                        {
                                                                            "a": "{{replace(17.delay3; \"h\"; emptystring)}}",
                                                                            "b": "0",
                                                                            "o": "number:greater"
                                                                        }
                                                                    ]
                                                                ]
                                                            },
                                                            "mapper": {
                                                                "type": "phone",
                                                                "order": false,
                                                                "phone": "{{1.phone_number}}",
                                                                "message": "Hola {{1.first_name}} 👋\r\n\r\nTu cita dental es hoy {{24.dia_semana_es}} {{24.dia_num}} de {{24.mes_es}} a las {{formatDate(1.start_time; \"HH:mm\")}}.\r\n\r\nTe recomendamos llegar 10 minutos antes para agilizar tu atención.\r\n\r\n📍 Arte Dental\r\nBenito Juárez 240, Centro Pitillal, 48290 Puerto Vallarta, Jal.\r\n\r\nSi surge algún imprevisto, comunícate lo antes posible al 322 166 9368 o respondiendo este mensaje.\r\n\r\n¡Nos vemos pronto!",
                                                                "retries": "100",
                                                                "schedule": {
                                                                    "delayTo": "{{17.delay3}}"
                                                                },
                                                                "expiration": {},
                                                                "previewUrl": true,
                                                                "sendReadAck": false,
                                                                "retentionPolicy": "plan_defaults"
                                                            },
                                                            "metadata": {
                                                                "designer": {
                                                                    "x": 3900,
                                                                    "y": 600
                                                                },
                                                                "restore": {
                                                                    "expect": {
                                                                        "live": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "type": {
                                                                            "mode": "chose",
                                                                            "label": "Phone"
                                                                        },
                                                                        "agent": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "order": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "device": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "actions": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "enqueue": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "previewUrl": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "sendReadAck": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "retentionPolicy": {
                                                                            "mode": "chose",
                                                                            "label": "plan_defaults"
                                                                        }
                                                                    },
                                                                    "parameters": {
                                                                        "__IMTCONN__": {
                                                                            "data": {
                                                                                "scoped": "true",
                                                                                "connection": "app#wassenger-0waevn"
                                                                            },
                                                                            "label": "Wassenger Arte Dental API"
                                                                        }
                                                                    }
                                                                },
                                                                "parameters": [
                                                                    {
                                                                        "name": "__IMTCONN__",
                                                                        "type": "account:app#wassenger-0waevn",
                                                                        "label": "Connection",
                                                                        "required": true
                                                                    }
                                                                ],
                                                                "expect": [
                                                                    {
                                                                        "name": "type",
                                                                        "type": "select",
                                                                        "label": "Destination Type",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "groups",
                                                                                "phone",
                                                                                "channel"
                                                                            ]
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "message",
                                                                        "type": "text",
                                                                        "label": "Message"
                                                                    },
                                                                    {
                                                                        "name": "reference",
                                                                        "type": "text",
                                                                        "label": "Reference"
                                                                    },
                                                                    {
                                                                        "name": "quote",
                                                                        "type": "text",
                                                                        "label": "Reply to Message ID"
                                                                    },
                                                                    {
                                                                        "name": "deliverAt",
                                                                        "type": "date",
                                                                        "label": "Deliver At"
                                                                    },
                                                                    {
                                                                        "name": "schedule",
                                                                        "spec": [
                                                                            {
                                                                                "name": "delay",
                                                                                "type": "number",
                                                                                "label": "Delay"
                                                                            },
                                                                            {
                                                                                "name": "delayTo",
                                                                                "type": "text",
                                                                                "label": "Delay To"
                                                                            },
                                                                            {
                                                                                "name": "date",
                                                                                "type": "date",
                                                                                "label": "Date"
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "Schedule"
                                                                    },
                                                                    {
                                                                        "name": "expiration",
                                                                        "spec": [
                                                                            {
                                                                                "name": "seconds",
                                                                                "type": "number",
                                                                                "label": "Seconds"
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "Expiration"
                                                                    },
                                                                    {
                                                                        "name": "device",
                                                                        "type": "select",
                                                                        "label": "From Device"
                                                                    },
                                                                    {
                                                                        "name": "agent",
                                                                        "type": "select",
                                                                        "label": "From Agent"
                                                                    },
                                                                    {
                                                                        "name": "live",
                                                                        "type": "boolean"
                                                                    },
                                                                    {
                                                                        "name": "enqueue",
                                                                        "type": "select",
                                                                        "label": "Enqueue",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "never",
                                                                                "always",
                                                                                "opportunistic"
                                                                            ]
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "actions",
                                                                        "spec": {
                                                                            "name": "value",
                                                                            "spec": [
                                                                                {
                                                                                    "name": "action",
                                                                                    "type": "select",
                                                                                    "label": "Action",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "chat:assign",
                                                                                            "value": "chat:assign",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "agent",
                                                                                                            "type": "select",
                                                                                                            "label": "Agent",
                                                                                                            "options": "rpc://app%23wassenger-0waevn/1/searchTeamRPC",
                                                                                                            "required": true
                                                                                                        },
                                                                                                        {
                                                                                                            "name": "assigner",
                                                                                                            "type": "select",
                                                                                                            "label": "Assigner",
                                                                                                            "options": "rpc://app%23wassenger-0waevn/1/searchTeamRPC"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:unassign",
                                                                                            "value": "chat:unassign",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "assigner",
                                                                                                            "type": "select",
                                                                                                            "label": "Assigner",
                                                                                                            "options": "rpc://app%23wassenger-0waevn/1/searchTeamRPC"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:resolve",
                                                                                            "value": "chat:resolve"
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:unresolve",
                                                                                            "value": "chat:unresolve"
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:read",
                                                                                            "value": "chat:read"
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:unread",
                                                                                            "value": "chat:unread"
                                                                                        },
                                                                                        {
                                                                                            "label": "labels:add",
                                                                                            "value": "labels:add",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "labels",
                                                                                                            "type": "array",
                                                                                                            "label": "Labels"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "labels:remove",
                                                                                            "value": "labels:remove",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "labels",
                                                                                                            "type": "array",
                                                                                                            "label": "Labels"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "labels:set",
                                                                                            "value": "labels:set",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "labels",
                                                                                                    "type": "array",
                                                                                                    "label": "Labels"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "metadata:set",
                                                                                            "value": "metadata:set",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "metadata",
                                                                                                            "type": "array",
                                                                                                            "label": "Metadatas"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "metadata:add",
                                                                                            "value": "metadata:add",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "metadata",
                                                                                                            "type": "array",
                                                                                                            "label": "Metadatas"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "metadata:remove",
                                                                                            "value": "metadata:remove",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "metadata",
                                                                                                            "type": "array",
                                                                                                            "label": "Metadatas"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "type": "collection"
                                                                        },
                                                                        "type": "array",
                                                                        "label": "Actions"
                                                                    },
                                                                    {
                                                                        "name": "previewUrl",
                                                                        "type": "boolean",
                                                                        "label": "Preview URL"
                                                                    },
                                                                    {
                                                                        "name": "order",
                                                                        "type": "boolean",
                                                                        "label": "Order"
                                                                    },
                                                                    {
                                                                        "name": "sendReadAck",
                                                                        "type": "boolean",
                                                                        "label": "Send Read Acknowledgement"
                                                                    },
                                                                    {
                                                                        "name": "retries",
                                                                        "type": "integer",
                                                                        "label": "Retries"
                                                                    },
                                                                    {
                                                                        "name": "retryWait",
                                                                        "type": "number",
                                                                        "label": "Retry Wait"
                                                                    },
                                                                    {
                                                                        "name": "retentionPolicy",
                                                                        "type": "select",
                                                                        "label": "Retention Policy",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "plan_defaults",
                                                                                "never",
                                                                                "5m",
                                                                                "15m",
                                                                                "30m",
                                                                                "1h",
                                                                                "12h",
                                                                                "24h",
                                                                                "2d",
                                                                                "3d",
                                                                                "4d",
                                                                                "5d",
                                                                                "6d",
                                                                                "7d",
                                                                                "10d"
                                                                            ]
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "phone",
                                                                        "type": "text",
                                                                        "label": "Phone number",
                                                                        "required": true
                                                                    }
                                                                ],
                                                                "advanced": true
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "flow": [
                                                        {
                                                            "id": 23,
                                                            "module": "app#wassenger-0waevn:sendGroupMessage",
                                                            "version": 1,
                                                            "parameters": {
                                                                "__IMTCONN__": 5704964
                                                            },
                                                            "filter": {
                                                                "name": "Tiempo para una hora",
                                                                "conditions": [
                                                                    [
                                                                        {
                                                                            "a": "{{replace(17.delay1; \"m\"; emptystring)}}",
                                                                            "b": "5",
                                                                            "o": "number:greater"
                                                                        }
                                                                    ]
                                                                ]
                                                            },
                                                            "mapper": {
                                                                "type": "phone",
                                                                "order": false,
                                                                "phone": "{{1.phone_number}}",
                                                                "message": "{{1.first_name}}, te esperamos en 1 hora ⏰\r\n\r\nTu cita es hoy a las {{formatDate(1.start_time; \"HH:mm\")}}\r\n\r\n📍 Arte Dental\r\nBenito Juárez 240, Centro Pitillal, 48290 Puerto Vallarta, Jal.\r\n\r\nCualquier consulta, llámanos: 322 166 9368\r\n\r\n¡Ya casi nos vemos! 🦷",
                                                                "retries": "100",
                                                                "schedule": {
                                                                    "delayTo": "{{17.delay1}}"
                                                                },
                                                                "expiration": {},
                                                                "previewUrl": true,
                                                                "sendReadAck": false,
                                                                "retentionPolicy": "plan_defaults"
                                                            },
                                                            "metadata": {
                                                                "designer": {
                                                                    "x": 3900,
                                                                    "y": 900
                                                                },
                                                                "restore": {
                                                                    "expect": {
                                                                        "live": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "type": {
                                                                            "mode": "chose",
                                                                            "label": "Phone"
                                                                        },
                                                                        "agent": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "order": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "device": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "actions": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "enqueue": {
                                                                            "mode": "chose",
                                                                            "label": "Empty"
                                                                        },
                                                                        "previewUrl": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "sendReadAck": {
                                                                            "mode": "chose"
                                                                        },
                                                                        "retentionPolicy": {
                                                                            "mode": "chose",
                                                                            "label": "plan_defaults"
                                                                        }
                                                                    },
                                                                    "parameters": {
                                                                        "__IMTCONN__": {
                                                                            "data": {
                                                                                "scoped": "true",
                                                                                "connection": "app#wassenger-0waevn"
                                                                            },
                                                                            "label": "Wassenger Arte Dental API"
                                                                        }
                                                                    }
                                                                },
                                                                "parameters": [
                                                                    {
                                                                        "name": "__IMTCONN__",
                                                                        "type": "account:app#wassenger-0waevn",
                                                                        "label": "Connection",
                                                                        "required": true
                                                                    }
                                                                ],
                                                                "expect": [
                                                                    {
                                                                        "name": "type",
                                                                        "type": "select",
                                                                        "label": "Destination Type",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "groups",
                                                                                "phone",
                                                                                "channel"
                                                                            ]
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "message",
                                                                        "type": "text",
                                                                        "label": "Message"
                                                                    },
                                                                    {
                                                                        "name": "reference",
                                                                        "type": "text",
                                                                        "label": "Reference"
                                                                    },
                                                                    {
                                                                        "name": "quote",
                                                                        "type": "text",
                                                                        "label": "Reply to Message ID"
                                                                    },
                                                                    {
                                                                        "name": "deliverAt",
                                                                        "type": "date",
                                                                        "label": "Deliver At"
                                                                    },
                                                                    {
                                                                        "name": "schedule",
                                                                        "spec": [
                                                                            {
                                                                                "name": "delay",
                                                                                "type": "number",
                                                                                "label": "Delay"
                                                                            },
                                                                            {
                                                                                "name": "delayTo",
                                                                                "type": "text",
                                                                                "label": "Delay To"
                                                                            },
                                                                            {
                                                                                "name": "date",
                                                                                "type": "date",
                                                                                "label": "Date"
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "Schedule"
                                                                    },
                                                                    {
                                                                        "name": "expiration",
                                                                        "spec": [
                                                                            {
                                                                                "name": "seconds",
                                                                                "type": "number",
                                                                                "label": "Seconds"
                                                                            }
                                                                        ],
                                                                        "type": "collection",
                                                                        "label": "Expiration"
                                                                    },
                                                                    {
                                                                        "name": "device",
                                                                        "type": "select",
                                                                        "label": "From Device"
                                                                    },
                                                                    {
                                                                        "name": "agent",
                                                                        "type": "select",
                                                                        "label": "From Agent"
                                                                    },
                                                                    {
                                                                        "name": "live",
                                                                        "type": "boolean"
                                                                    },
                                                                    {
                                                                        "name": "enqueue",
                                                                        "type": "select",
                                                                        "label": "Enqueue",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "never",
                                                                                "always",
                                                                                "opportunistic"
                                                                            ]
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "actions",
                                                                        "spec": {
                                                                            "name": "value",
                                                                            "spec": [
                                                                                {
                                                                                    "name": "action",
                                                                                    "type": "select",
                                                                                    "label": "Action",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "chat:assign",
                                                                                            "value": "chat:assign",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "agent",
                                                                                                            "type": "select",
                                                                                                            "label": "Agent",
                                                                                                            "options": "rpc://app%23wassenger-0waevn/1/searchTeamRPC",
                                                                                                            "required": true
                                                                                                        },
                                                                                                        {
                                                                                                            "name": "assigner",
                                                                                                            "type": "select",
                                                                                                            "label": "Assigner",
                                                                                                            "options": "rpc://app%23wassenger-0waevn/1/searchTeamRPC"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:unassign",
                                                                                            "value": "chat:unassign",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "assigner",
                                                                                                            "type": "select",
                                                                                                            "label": "Assigner",
                                                                                                            "options": "rpc://app%23wassenger-0waevn/1/searchTeamRPC"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:resolve",
                                                                                            "value": "chat:resolve"
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:unresolve",
                                                                                            "value": "chat:unresolve"
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:read",
                                                                                            "value": "chat:read"
                                                                                        },
                                                                                        {
                                                                                            "label": "chat:unread",
                                                                                            "value": "chat:unread"
                                                                                        },
                                                                                        {
                                                                                            "label": "labels:add",
                                                                                            "value": "labels:add",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "labels",
                                                                                                            "type": "array",
                                                                                                            "label": "Labels"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "labels:remove",
                                                                                            "value": "labels:remove",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "labels",
                                                                                                            "type": "array",
                                                                                                            "label": "Labels"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "labels:set",
                                                                                            "value": "labels:set",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "labels",
                                                                                                    "type": "array",
                                                                                                    "label": "Labels"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "metadata:set",
                                                                                            "value": "metadata:set",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "metadata",
                                                                                                            "type": "array",
                                                                                                            "label": "Metadatas"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "metadata:add",
                                                                                            "value": "metadata:add",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "metadata",
                                                                                                            "type": "array",
                                                                                                            "label": "Metadatas"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            "label": "metadata:remove",
                                                                                            "value": "metadata:remove",
                                                                                            "nested": [
                                                                                                {
                                                                                                    "name": "params",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "metadata",
                                                                                                            "type": "array",
                                                                                                            "label": "Metadatas"
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection"
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ],
                                                                            "type": "collection"
                                                                        },
                                                                        "type": "array",
                                                                        "label": "Actions"
                                                                    },
                                                                    {
                                                                        "name": "previewUrl",
                                                                        "type": "boolean",
                                                                        "label": "Preview URL"
                                                                    },
                                                                    {
                                                                        "name": "order",
                                                                        "type": "boolean",
                                                                        "label": "Order"
                                                                    },
                                                                    {
                                                                        "name": "sendReadAck",
                                                                        "type": "boolean",
                                                                        "label": "Send Read Acknowledgement"
                                                                    },
                                                                    {
                                                                        "name": "retries",
                                                                        "type": "integer",
                                                                        "label": "Retries"
                                                                    },
                                                                    {
                                                                        "name": "retryWait",
                                                                        "type": "number",
                                                                        "label": "Retry Wait"
                                                                    },
                                                                    {
                                                                        "name": "retentionPolicy",
                                                                        "type": "select",
                                                                        "label": "Retention Policy",
                                                                        "validate": {
                                                                            "enum": [
                                                                                "plan_defaults",
                                                                                "never",
                                                                                "5m",
                                                                                "15m",
                                                                                "30m",
                                                                                "1h",
                                                                                "12h",
                                                                                "24h",
                                                                                "2d",
                                                                                "3d",
                                                                                "4d",
                                                                                "5d",
                                                                                "6d",
                                                                                "7d",
                                                                                "10d"
                                                                            ]
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "phone",
                                                                        "type": "text",
                                                                        "label": "Phone number",
                                                                        "required": true
                                                                    }
                                                                ],
                                                                "advanced": true
                                                            },
                                                            "onerror": [
                                                                {
                                                                    "id": 31,
                                                                    "module": "builtin:Ignore",
                                                                    "version": 1,
                                                                    "metadata": {
                                                                        "designer": {
                                                                            "x": 4200,
                                                                            "y": 900
                                                                        }
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "flow": [
                                        {
                                            "id": 3,
                                            "module": "scenario-service:ReturnData",
                                            "version": 2,
                                            "parameters": {},
                                            "mapper": {
                                                "output_error": "sin errores",
                                                "calendar_output": "{{`5`}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2700,
                                                    "y": 1200
                                                },
                                                "restore": {},
                                                "expect": [
                                                    {
                                                        "name": "calendar_output",
                                                        "type": "any",
                                                        "label": ""
                                                    },
                                                    {
                                                        "name": "output_error",
                                                        "type": "any",
                                                        "label": ""
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "flow": [
                        {
                            "id": 28,
                            "module": "scenario-service:ReturnData",
                            "version": 2,
                            "parameters": {},
                            "filter": {
                                "name": "Si no hay espacio",
                                "conditions": []
                            },
                            "mapper": {
                                "output_error": "{\n  \"mapper\": {\n    \"status\": \"error\",\n    \"message\": \"El horario solicitado no está disponible. Ya existe una cita agendada en ese rango.\",\n    \"eventos_dia\": \"{{26.array}}\"\n  }\n}"
                            },
                            "metadata": {
                                "designer": {
                                    "x": 2100,
                                    "y": 1500
                                },
                                "restore": {},
                                "expect": [
                                    {
                                        "name": "calendar_output",
                                        "type": "any",
                                        "label": ""
                                    },
                                    {
                                        "name": "output_error",
                                        "type": "any",
                                        "label": ""
                                    }
                                ]
                            }
                        }
                    ]
                }
            ]
        }
    ],
    "metadata": {
        "instant": false,
        "version": 1,
        "scenario": {
            "roundtrips": 1,
            "maxErrors": 3,
            "autoCommit": true,
            "autoCommitTriggerLast": true,
            "sequential": false,
            "slots": null,
            "confidential": false,
            "dataloss": false,
            "dlq": false,
            "freshVariables": false
        },
        "designer": {
            "orphans": []
        },
        "zone": "us2.make.com",
        "notes": []
    },
    "io": {
        "input_spec": [
            {
                "help": "Fecha y hora de inicio del rango, formato DD.MM.YYYY HH:mm (CST zona horaria)",
                "name": "start_time",
                "type": "text",
                "label": "",
                "default": "",
                "required": true,
                "multiline": false
            },
            {
                "help": "Fecha y hora de fin del rango, formato DD.MM.YYYY HH:mm (CST zona horaria)",
                "name": "end_time",
                "type": "text",
                "label": "",
                "default": "",
                "required": true,
                "multiline": false
            },
            {
                "help": "Descripción de la reunión. Formato: Nombre, motivo y contacto.",
                "name": "description",
                "type": "text",
                "label": "",
                "default": "",
                "required": true,
                "multiline": false
            },
            {
                "help": "Numero telefónico del prospecto",
                "name": "phone_number",
                "type": "text",
                "label": "",
                "default": "",
                "required": true,
                "multiline": false
            },
            {
                "help": "Email del prospecto (si se conoce)",
                "name": "email",
                "type": "text",
                "label": "",
                "default": "",
                "required": false,
                "multiline": false
            },
            {
                "help": "Nombre/nombres del prospecto",
                "name": "first_name",
                "type": "text",
                "label": "",
                "default": "",
                "required": false,
                "multiline": false
            },
            {
                "help": "Apellido/apellidos del prospecto",
                "name": "last_name",
                "type": "text",
                "label": "",
                "default": "",
                "required": false,
                "multiline": false
            },
            {
                "help": "Lead ID de meta (en caso de venir de lead campaign)",
                "name": "lead_id",
                "type": "number",
                "label": "",
                "default": null,
                "required": false
            },
            {
                "help": "WID correspondiente al contacto de wassenger, incluir si está disponible.",
                "name": "wassenger_contact_wid",
                "type": "text",
                "label": "",
                "default": "",
                "required": false,
                "multiline": false
            }
        ],
        "output_spec": [
            {
                "help": "Output de google calendar tras agendamiento.",
                "name": "calendar_output",
                "type": "any",
                "label": "",
                "default": "",
                "required": false
            },
            {
                "help": "Output de error si hay solapamiento. ",
                "name": "output_error",
                "type": "any",
                "label": "",
                "default": "sin errores",
                "required": false
            }
        ]
    }
}